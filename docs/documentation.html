<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Wall - App Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #ff5722;
            border-bottom: 2px solid #ff5722;
            padding-bottom: 10px;
        }
        h2 {
            color: #ff5722;
            margin-top: 30px;
        }
        h3 {
            margin-top: 25px;
        }
        code {
            background-color: #f5f5f5;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: monospace;
        }
        pre {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .note {
            background-color: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
        }
        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px 0;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <h1>The Wall - Shanghai Event Discovery App</h1>
    <p>Documentation for the prototype implementation based on the PRD.</p>

    <h2>Overview</h2>
    <p>The Wall is a map-based event discovery application for Shanghai that allows users to find events happening around the city without the need for registration or social interactions. Users can view event posters pinned to locations on a map and upload their own events, which are moderated before being published.</p>

    <h2>Features Implemented</h2>
    <ul>
        <li><strong>Map Interface</strong>: Interactive map of Shanghai with event pins, zoom/pan controls, and current location detection</li>
        <li><strong>Event Display</strong>: Event previews and detailed views with time proximity indicators</li>
        <li><strong>Event Submission</strong>: Multi-step form for uploading posters and event details</li>
        <li><strong>Admin Moderation</strong>: Dashboard for reviewing and approving submitted events</li>
        <li><strong>Time-Based Features</strong>: Event expiration and visual degradation as end time approaches</li>
    </ul>

    <h2>Technical Implementation</h2>
    <h3>Tech Stack</h3>
    <ul>
        <li><strong>Frontend</strong>: React with styled-components</li>
        <li><strong>Backend</strong>: Node.js/Express</li>
        <li><strong>Maps</strong>: OpenStreetMap with Leaflet</li>
        <li><strong>Data Storage</strong>: In-memory for prototype (can be replaced with PostgreSQL/Supabase)</li>
    </ul>

    <h3>Project Structure</h3>
    <pre>
the-wall-app/
├── public/                 # Static files
├── server/                 # Backend server
│   └── server.js           # Express server implementation
├── src/                    # Frontend source code
│   ├── components/         # Reusable UI components
│   │   ├── BottomNav.js    # Bottom navigation bar
│   │   └── EventPreview.js # Event preview component
│   ├── pages/              # Page components
│   │   ├── AboutInfoPage.js       # About/Info page
│   │   ├── AdminModeration.js     # Admin moderation interface
│   │   ├── EventDetailView.js     # Event detail view
│   │   ├── EventSubmissionFlow.js # Event submission flow
│   │   └── MapView.js             # Main map view
│   ├── api.js              # API client for backend communication
│   ├── App.js              # Main application component
│   └── index.js            # Application entry point
├── wireframes/             # HTML wireframes
│   ├── about_info_page.html
│   ├── admin_moderation_interface.html
│   ├── event_detail_view.html
│   ├── event_submission_flow.html
│   └── map_view.html
└── package.json            # Project configuration
</pre>

    <h2>Running the Application</h2>
    <h3>Prerequisites</h3>
    <ul>
        <li>Node.js (v14 or higher)</li>
        <li>npm (v6 or higher)</li>
    </ul>

    <h3>Installation</h3>
    <pre>
# Clone the repository
git clone [repository-url]
cd the-wall-app

# Install dependencies
npm install
</pre>

    <h3>Development</h3>
    <pre>
# Start both frontend and backend servers
npm start

# The application will be available at:
# - Frontend: http://localhost:3000
# - Backend API: http://localhost:3001
</pre>

    <div class="note">
        <p><strong>Note:</strong> The prototype uses OpenStreetMap with Leaflet for mapping, which provides accurate coordinates for China without requiring an API key.</p>
    </div>

    <h2>API Endpoints</h2>
    <h3>Public Endpoints</h3>
    <ul>
        <li><code>GET /api/events</code> - Get all approved events</li>
        <li><code>GET /api/events/:id</code> - Get a specific event by ID</li>
        <li><code>POST /api/events</code> - Submit a new event</li>
    </ul>

    <h3>Admin Endpoints</h3>
    <ul>
        <li><code>GET /api/admin/pending</code> - Get all pending events</li>
        <li><code>GET /api/admin/approved</code> - Get all approved events</li>
        <li><code>GET /api/admin/rejected</code> - Get all rejected events</li>
        <li><code>PUT /api/admin/approve/:id</code> - Approve an event</li>
        <li><code>PUT /api/admin/reject/:id</code> - Reject an event</li>
    </ul>

    <h2>Future Enhancements</h2>
    <p>Based on the PRD, the following features could be implemented in future versions:</p>
    <ul>
        <li><strong>Weather Integration</strong>: Display current and forecasted weather on the map</li>
        <li><strong>Advanced Filtering</strong>: Filter events by type/category, date range, or area/district</li>
        <li><strong>Event Reminders</strong>: Allow users to set reminders for events of interest</li>
        <li><strong>Analytics Dashboard</strong>: Provide metrics on event popularity and engagement</li>
        <li><strong>China-Specific Adaptations</strong>: Integration with Baidu Maps or AutoNavi/Gaode Maps, ICP licensing, and hosting on Alibaba Cloud</li>
    </ul>

    <h2>Testing</h2>
    <p>The prototype has been tested for the following functionality:</p>
    <ul>
        <li>Map rendering and interaction</li>
        <li>Event pin display and clustering</li>
        <li>Event submission flow</li>
        <li>Admin moderation workflow</li>
        <li>Responsive design on various screen sizes</li>
    </ul>

    <h2>Deployment</h2>
    <p>For production deployment, follow these steps:</p>
    <pre>
# Build the frontend
npm run build

# Set environment variables
export NODE_ENV=production

# Start the server
node server/server.js
</pre>

    <div class="note">
        <p><strong>Note for China Deployment:</strong> As mentioned in the PRD, for deployment in China, you'll need to:</p>
        <ul>
            <li>Continue using OpenStreetMap with Leaflet or consider switching to Baidu Maps/AutoNavi for local compliance</li>
            <li>Host on Alibaba Cloud or another China-based provider</li>
            <li>Obtain an ICP license</li>
            <li>Ensure compliance with local content regulations</li>
        </ul>
    </div>

    <h2>Conclusion</h2>
    <p>This prototype demonstrates the core functionality of The Wall app as specified in the PRD. It provides a solid foundation for further development and refinement before a full production release.</p>
</body>
</html>
